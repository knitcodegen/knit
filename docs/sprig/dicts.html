<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dictionaries and Dict Functions | knit</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Documentation website for knitcodegen/knit">
    <meta name="theme-color" content="#29BEB0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/knit/assets/css/0.styles.4bbaff76.css" as="style"><link rel="preload" href="/knit/assets/js/app.7846f8ce.js" as="script"><link rel="preload" href="/knit/assets/js/2.9f7d206a.js" as="script"><link rel="preload" href="/knit/assets/js/20.cee38f04.js" as="script"><link rel="prefetch" href="/knit/assets/js/10.15202152.js"><link rel="prefetch" href="/knit/assets/js/11.72801e75.js"><link rel="prefetch" href="/knit/assets/js/12.5eaabdd6.js"><link rel="prefetch" href="/knit/assets/js/13.8bf6d4ab.js"><link rel="prefetch" href="/knit/assets/js/14.6a10da3a.js"><link rel="prefetch" href="/knit/assets/js/15.fa394b0a.js"><link rel="prefetch" href="/knit/assets/js/16.40c36c2f.js"><link rel="prefetch" href="/knit/assets/js/17.9b6b8893.js"><link rel="prefetch" href="/knit/assets/js/18.e39e5f78.js"><link rel="prefetch" href="/knit/assets/js/19.6ee22869.js"><link rel="prefetch" href="/knit/assets/js/21.32d025e9.js"><link rel="prefetch" href="/knit/assets/js/22.a72ae9b5.js"><link rel="prefetch" href="/knit/assets/js/23.eb15d75b.js"><link rel="prefetch" href="/knit/assets/js/24.55ad001c.js"><link rel="prefetch" href="/knit/assets/js/25.6cd93691.js"><link rel="prefetch" href="/knit/assets/js/26.7843e787.js"><link rel="prefetch" href="/knit/assets/js/27.93a75c5c.js"><link rel="prefetch" href="/knit/assets/js/28.92dd564e.js"><link rel="prefetch" href="/knit/assets/js/29.55ba35e7.js"><link rel="prefetch" href="/knit/assets/js/3.c9530dd1.js"><link rel="prefetch" href="/knit/assets/js/30.57f5cb18.js"><link rel="prefetch" href="/knit/assets/js/31.ed79c11b.js"><link rel="prefetch" href="/knit/assets/js/32.1bde9a65.js"><link rel="prefetch" href="/knit/assets/js/33.205c9c2d.js"><link rel="prefetch" href="/knit/assets/js/34.110e965d.js"><link rel="prefetch" href="/knit/assets/js/35.cfdf6c35.js"><link rel="prefetch" href="/knit/assets/js/36.a495dfd8.js"><link rel="prefetch" href="/knit/assets/js/4.e27a7f7a.js"><link rel="prefetch" href="/knit/assets/js/5.e9f4081f.js"><link rel="prefetch" href="/knit/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/knit/assets/js/7.81b258a5.js"><link rel="prefetch" href="/knit/assets/js/8.e03815f2.js"><link rel="prefetch" href="/knit/assets/js/9.effed064.js">
    <link rel="stylesheet" href="/knit/assets/css/0.styles.4bbaff76.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knit/" class="home-link router-link-active"><!----> <span class="site-name">knit</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knit/docs/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/knit/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="https://github.com/knitcodegen/knit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knit/docs/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/knit/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="https://github.com/knitcodegen/knit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Knit</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knit/docs/install.html" class="sidebar-link">Installation</a></li><li><a href="/knit/docs/options.html" class="sidebar-link">Options</a></li><li><a href="/knit/docs/cli.html" class="sidebar-link">CLI</a></li><li><a href="/knit/docs/embedding.html" class="sidebar-link">Embedding</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Sprig</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knit/docs/sprig/conversion.html" class="sidebar-link">Type Conversion Functions</a></li><li><a href="/knit/docs/sprig/crypto.html" class="sidebar-link">Cryptographic and Security Functions</a></li><li><a href="/knit/docs/sprig/date.html" class="sidebar-link">Date Functions</a></li><li><a href="/knit/docs/sprig/defaults.html" class="sidebar-link">Default Functions</a></li><li><a href="/knit/docs/sprig/dicts.html" aria-current="page" class="active sidebar-link">Dictionaries and Dict Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#dict" class="sidebar-link">dict</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#get" class="sidebar-link">get</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#unset" class="sidebar-link">unset</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#haskey" class="sidebar-link">hasKey</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#pluck" class="sidebar-link">pluck</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#dig" class="sidebar-link">dig</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#merge-mustmerge" class="sidebar-link">merge, mustMerge</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#mergeoverwrite-mustmergeoverwrite" class="sidebar-link">mergeOverwrite, mustMergeOverwrite</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#keys" class="sidebar-link">keys</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#pick" class="sidebar-link">pick</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#omit" class="sidebar-link">omit</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#values" class="sidebar-link">values</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#deepcopy-mustdeepcopy" class="sidebar-link">deepCopy, mustDeepCopy</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/dicts.html#a-note-on-dict-internals" class="sidebar-link">A Note on Dict Internals</a></li></ul></li><li><a href="/knit/docs/sprig/encoding.html" class="sidebar-link">Encoding Functions</a></li><li><a href="/knit/docs/sprig/flow_control.html" class="sidebar-link">Flow Control Functions</a></li><li><a href="/knit/docs/sprig/integer_slice.html" class="sidebar-link">Integer Slice Functions</a></li><li><a href="/knit/docs/sprig/lists.html" class="sidebar-link">Lists and List Functions</a></li><li><a href="/knit/docs/sprig/math.html" class="sidebar-link">Integer Math Functions</a></li><li><a href="/knit/docs/sprig/mathf.html" class="sidebar-link">Float Math Functions</a></li><li><a href="/knit/docs/sprig/network.html" class="sidebar-link">Network Functions</a></li><li><a href="/knit/docs/sprig/os.html" class="sidebar-link">OS Functions</a></li><li><a href="/knit/docs/sprig/paths.html" class="sidebar-link">Path and Filepath Functions</a></li><li><a href="/knit/docs/sprig/reflection.html" class="sidebar-link">Reflection Functions</a></li><li><a href="/knit/docs/sprig/semver.html" class="sidebar-link">Semantic Version Functions</a></li><li><a href="/knit/docs/sprig/string_slice.html" class="sidebar-link">String Slice Functions</a></li><li><a href="/knit/docs/sprig/strings.html" class="sidebar-link">String Functions</a></li><li><a href="/knit/docs/sprig/url.html" class="sidebar-link">URL Functions</a></li><li><a href="/knit/docs/sprig/uuid.html" class="sidebar-link">UUID Functions</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dictionaries-and-dict-functions"><a href="#dictionaries-and-dict-functions" class="header-anchor">#</a> Dictionaries and Dict Functions</h1> <p>Sprig provides a key/value storage type called a <code>dict</code> (short for &quot;dictionary&quot;,
as in Python). A <code>dict</code> is an <em>unorder</em> type.</p> <p>The key to a dictionary <strong>must be a string</strong>. However, the value can be any
type, even another <code>dict</code> or <code>list</code>.</p> <p>Unlike <code>list</code>s, <code>dict</code>s are not immutable. The <code>set</code> and <code>unset</code> functions will
modify the contents of a dictionary.</p> <h2 id="dict"><a href="#dict" class="header-anchor">#</a> dict</h2> <p>Creating dictionaries is done by calling the <code>dict</code> function and passing it a
list of pairs.</p> <p>The following creates a dictionary with three items:</p> <div class="language- extra-class"><pre class="language-text"><code>$myDict := dict &quot;name1&quot; &quot;value1&quot; &quot;name2&quot; &quot;value2&quot; &quot;name3&quot; &quot;value 3&quot;
</code></pre></div><h2 id="get"><a href="#get" class="header-anchor">#</a> get</h2> <p>Given a map and a key, get the value from the map.</p> <div class="language- extra-class"><pre class="language-text"><code>get $myDict &quot;key1&quot;
</code></pre></div><p>The above returns <code>&quot;value1&quot;</code></p> <p>Note that if the key is not found, this operation will simply return <code>&quot;&quot;</code>. No error
will be generated.</p> <h2 id="set"><a href="#set" class="header-anchor">#</a> set</h2> <p>Use <code>set</code> to add a new key/value pair to a dictionary.</p> <div class="language- extra-class"><pre class="language-text"><code>$_ := set $myDict &quot;name4&quot; &quot;value4&quot;
</code></pre></div><p>Note that <code>set</code> <em>returns the dictionary</em> (a requirement of Go template functions),
so you may need to trap the value as done above with the <code>$_</code> assignment.</p> <h2 id="unset"><a href="#unset" class="header-anchor">#</a> unset</h2> <p>Given a map and a key, delete the key from the map.</p> <div class="language- extra-class"><pre class="language-text"><code>$_ := unset $myDict &quot;name4&quot;
</code></pre></div><p>As with <code>set</code>, this returns the dictionary.</p> <p>Note that if the key is not found, this operation will simply return. No error
will be generated.</p> <h2 id="haskey"><a href="#haskey" class="header-anchor">#</a> hasKey</h2> <p>The <code>hasKey</code> function returns <code>true</code> if the given dict contains the given key.</p> <div class="language- extra-class"><pre class="language-text"><code>hasKey $myDict &quot;name1&quot;
</code></pre></div><p>If the key is not found, this returns <code>false</code>.</p> <h2 id="pluck"><a href="#pluck" class="header-anchor">#</a> pluck</h2> <p>The <code>pluck</code> function makes it possible to give one key and multiple maps, and
get a list of all of the matches:</p> <div class="language- extra-class"><pre class="language-text"><code>pluck &quot;name1&quot; $myDict $myOtherDict
</code></pre></div><p>The above will return a <code>list</code> containing every found value (<code>[value1 otherValue1]</code>).</p> <p>If the give key is <em>not found</em> in a map, that map will not have an item in the
list (and the length of the returned list will be less than the number of dicts
in the call to <code>pluck</code>.</p> <p>If the key is <em>found</em> but the value is an empty value, that value will be
inserted.</p> <p>A common idiom in Sprig templates is to uses <code>pluck... | first</code> to get the first
matching key out of a collection of dictionaries.</p> <h2 id="dig"><a href="#dig" class="header-anchor">#</a> dig</h2> <p>The <code>dig</code> function traverses a nested set of dicts, selecting keys from a list
of values. It returns a default value if any of the keys are not found at the
associated dict.</p> <div class="language- extra-class"><pre class="language-text"><code>dig &quot;user&quot; &quot;role&quot; &quot;humanName&quot; &quot;guest&quot; $dict
</code></pre></div><p>Given a dict structured like</p> <div class="language- extra-class"><pre class="language-text"><code>{
  user: {
    role: {
      humanName: &quot;curator&quot;
    }
  }
}
</code></pre></div><p>the above would return <code>&quot;curator&quot;</code>. If the dict lacked even a <code>user</code> field,
the result would be <code>&quot;guest&quot;</code>.</p> <p>Dig can be very useful in cases where you'd like to avoid guard clauses,
especially since Go's template package's <code>and</code> doesn't shortcut. For instance
<code>and a.maybeNil a.maybeNil.iNeedThis</code> will always evaluate
<code>a.maybeNil.iNeedThis</code>, and panic if <code>a</code> lacks a <code>maybeNil</code> field.)</p> <p><code>dig</code> accepts its dict argument last in order to support pipelining. For instance:</p> <div class="language- extra-class"><pre class="language-text"><code>merge a b c | dig &quot;one&quot; &quot;two&quot; &quot;three&quot; &quot;&lt;missing&gt;&quot;
</code></pre></div><h2 id="merge-mustmerge"><a href="#merge-mustmerge" class="header-anchor">#</a> merge, mustMerge</h2> <p>Merge two or more dictionaries into one, giving precedence to the dest dictionary:</p> <div class="language- extra-class"><pre class="language-text"><code>$newdict := merge $dest $source1 $source2
</code></pre></div><p>This is a deep merge operation but not a deep copy operation. Nested objects that
are merged are the same instance on both dicts. If you want a deep copy along
with the merge than use the <code>deepCopy</code> function along with merging. For example,</p> <div class="language- extra-class"><pre class="language-text"><code>deepCopy $source | merge $dest
</code></pre></div><p><code>mustMerge</code> will return an error in case of unsuccessful merge.</p> <h2 id="mergeoverwrite-mustmergeoverwrite"><a href="#mergeoverwrite-mustmergeoverwrite" class="header-anchor">#</a> mergeOverwrite, mustMergeOverwrite</h2> <p>Merge two or more dictionaries into one, giving precedence from <strong>right to left</strong>, effectively
overwriting values in the dest dictionary:</p> <p>Given:</p> <div class="language- extra-class"><pre class="language-text"><code>dst:
  default: default
  overwrite: me
  key: true

src:
  overwrite: overwritten
  key: false
</code></pre></div><p>will result in:</p> <div class="language- extra-class"><pre class="language-text"><code>newdict:
  default: default
  overwrite: overwritten
  key: false
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$newdict := mergeOverwrite $dest $source1 $source2
</code></pre></div><p>This is a deep merge operation but not a deep copy operation. Nested objects that
are merged are the same instance on both dicts. If you want a deep copy along
with the merge than use the <code>deepCopy</code> function along with merging. For example,</p> <div class="language- extra-class"><pre class="language-text"><code>deepCopy $source | mergeOverwrite $dest
</code></pre></div><p><code>mustMergeOverwrite</code> will return an error in case of unsuccessful merge.</p> <h2 id="keys"><a href="#keys" class="header-anchor">#</a> keys</h2> <p>The <code>keys</code> function will return a <code>list</code> of all of the keys in one or more <code>dict</code>
types. Since a dictionary is <em>unordered</em>, the keys will not be in a predictable order.
They can be sorted with <code>sortAlpha</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>keys $myDict | sortAlpha
</code></pre></div><p>When supplying multiple dictionaries, the keys will be concatenated. Use the <code>uniq</code>
function along with <code>sortAlpha</code> to get a unqiue, sorted list of keys.</p> <div class="language- extra-class"><pre class="language-text"><code>keys $myDict $myOtherDict | uniq | sortAlpha
</code></pre></div><h2 id="pick"><a href="#pick" class="header-anchor">#</a> pick</h2> <p>The <code>pick</code> function selects just the given keys out of a dictionary, creating a
new <code>dict</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>$new := pick $myDict &quot;name1&quot; &quot;name2&quot;
</code></pre></div><p>The above returns <code>{name1: value1, name2: value2}</code></p> <h2 id="omit"><a href="#omit" class="header-anchor">#</a> omit</h2> <p>The <code>omit</code> function is similar to <code>pick</code>, except it returns a new <code>dict</code> with all
the keys that <em>do not</em> match the given keys.</p> <div class="language- extra-class"><pre class="language-text"><code>$new := omit $myDict &quot;name1&quot; &quot;name3&quot;
</code></pre></div><p>The above returns <code>{name2: value2}</code></p> <h2 id="values"><a href="#values" class="header-anchor">#</a> values</h2> <p>The <code>values</code> function is similar to <code>keys</code>, except it returns a new <code>list</code> with
all the values of the source <code>dict</code> (only one dictionary is supported).</p> <div class="language- extra-class"><pre class="language-text"><code>$vals := values $myDict
</code></pre></div><p>The above returns <code>list[&quot;value1&quot;, &quot;value2&quot;, &quot;value 3&quot;]</code>. Note that the <code>values</code>
function gives no guarantees about the result ordering- if you care about this,
then use <code>sortAlpha</code>.</p> <h2 id="deepcopy-mustdeepcopy"><a href="#deepcopy-mustdeepcopy" class="header-anchor">#</a> deepCopy, mustDeepCopy</h2> <p>The <code>deepCopy</code> and <code>mustDeepCopy</code> functions takes a value and makes a deep copy
of the value. This includes dicts and other structures. <code>deepCopy</code> panics
when there is a problem while <code>mustDeepCopy</code> returns an error to the template
system when there is an error.</p> <div class="language- extra-class"><pre class="language-text"><code>dict &quot;a&quot; 1 &quot;b&quot; 2 | deepCopy
</code></pre></div><h2 id="a-note-on-dict-internals"><a href="#a-note-on-dict-internals" class="header-anchor">#</a> A Note on Dict Internals</h2> <p>A <code>dict</code> is implemented in Go as a <code>map[string]interface{}</code>. Go developers can
pass <code>map[string]interface{}</code> values into the context to make them available
to templates as <code>dict</code>s.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knit/docs/sprig/defaults.html" class="prev">
        Default Functions
      </a></span> <span class="next"><a href="/knit/docs/sprig/encoding.html">
        Encoding Functions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knit/assets/js/app.7846f8ce.js" defer></script><script src="/knit/assets/js/2.9f7d206a.js" defer></script><script src="/knit/assets/js/20.cee38f04.js" defer></script>
  </body>
</html>
