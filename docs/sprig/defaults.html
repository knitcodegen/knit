<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Default Functions | knit</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Documentation website for knitcodegen/knit">
    <meta name="theme-color" content="#29BEB0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/knit/assets/css/0.styles.4bbaff76.css" as="style"><link rel="preload" href="/knit/assets/js/app.7846f8ce.js" as="script"><link rel="preload" href="/knit/assets/js/2.9f7d206a.js" as="script"><link rel="preload" href="/knit/assets/js/19.6ee22869.js" as="script"><link rel="prefetch" href="/knit/assets/js/10.15202152.js"><link rel="prefetch" href="/knit/assets/js/11.72801e75.js"><link rel="prefetch" href="/knit/assets/js/12.5eaabdd6.js"><link rel="prefetch" href="/knit/assets/js/13.8bf6d4ab.js"><link rel="prefetch" href="/knit/assets/js/14.6a10da3a.js"><link rel="prefetch" href="/knit/assets/js/15.fa394b0a.js"><link rel="prefetch" href="/knit/assets/js/16.40c36c2f.js"><link rel="prefetch" href="/knit/assets/js/17.9b6b8893.js"><link rel="prefetch" href="/knit/assets/js/18.e39e5f78.js"><link rel="prefetch" href="/knit/assets/js/20.cee38f04.js"><link rel="prefetch" href="/knit/assets/js/21.32d025e9.js"><link rel="prefetch" href="/knit/assets/js/22.a72ae9b5.js"><link rel="prefetch" href="/knit/assets/js/23.eb15d75b.js"><link rel="prefetch" href="/knit/assets/js/24.55ad001c.js"><link rel="prefetch" href="/knit/assets/js/25.6cd93691.js"><link rel="prefetch" href="/knit/assets/js/26.7843e787.js"><link rel="prefetch" href="/knit/assets/js/27.93a75c5c.js"><link rel="prefetch" href="/knit/assets/js/28.92dd564e.js"><link rel="prefetch" href="/knit/assets/js/29.55ba35e7.js"><link rel="prefetch" href="/knit/assets/js/3.c9530dd1.js"><link rel="prefetch" href="/knit/assets/js/30.57f5cb18.js"><link rel="prefetch" href="/knit/assets/js/31.ed79c11b.js"><link rel="prefetch" href="/knit/assets/js/32.1bde9a65.js"><link rel="prefetch" href="/knit/assets/js/33.205c9c2d.js"><link rel="prefetch" href="/knit/assets/js/34.110e965d.js"><link rel="prefetch" href="/knit/assets/js/35.cfdf6c35.js"><link rel="prefetch" href="/knit/assets/js/36.a495dfd8.js"><link rel="prefetch" href="/knit/assets/js/4.e27a7f7a.js"><link rel="prefetch" href="/knit/assets/js/5.e9f4081f.js"><link rel="prefetch" href="/knit/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/knit/assets/js/7.81b258a5.js"><link rel="prefetch" href="/knit/assets/js/8.e03815f2.js"><link rel="prefetch" href="/knit/assets/js/9.effed064.js">
    <link rel="stylesheet" href="/knit/assets/css/0.styles.4bbaff76.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knit/" class="home-link router-link-active"><!----> <span class="site-name">knit</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knit/docs/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/knit/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="https://github.com/knitcodegen/knit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knit/docs/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/knit/docs/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="https://github.com/knitcodegen/knit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Knit</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knit/docs/install.html" class="sidebar-link">Installation</a></li><li><a href="/knit/docs/options.html" class="sidebar-link">Options</a></li><li><a href="/knit/docs/cli.html" class="sidebar-link">CLI</a></li><li><a href="/knit/docs/embedding.html" class="sidebar-link">Embedding</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Sprig</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knit/docs/sprig/conversion.html" class="sidebar-link">Type Conversion Functions</a></li><li><a href="/knit/docs/sprig/crypto.html" class="sidebar-link">Cryptographic and Security Functions</a></li><li><a href="/knit/docs/sprig/date.html" class="sidebar-link">Date Functions</a></li><li><a href="/knit/docs/sprig/defaults.html" aria-current="page" class="active sidebar-link">Default Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#default" class="sidebar-link">default</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#empty" class="sidebar-link">empty</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#coalesce" class="sidebar-link">coalesce</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#all" class="sidebar-link">all</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#any" class="sidebar-link">any</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#fromjson-mustfromjson" class="sidebar-link">fromJson, mustFromJson</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#tojson-musttojson" class="sidebar-link">toJson, mustToJson</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#toprettyjson-musttoprettyjson" class="sidebar-link">toPrettyJson, mustToPrettyJson</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#torawjson-musttorawjson" class="sidebar-link">toRawJson, mustToRawJson</a></li><li class="sidebar-sub-header"><a href="/knit/docs/sprig/defaults.html#ternary" class="sidebar-link">ternary</a></li></ul></li><li><a href="/knit/docs/sprig/dicts.html" class="sidebar-link">Dictionaries and Dict Functions</a></li><li><a href="/knit/docs/sprig/encoding.html" class="sidebar-link">Encoding Functions</a></li><li><a href="/knit/docs/sprig/flow_control.html" class="sidebar-link">Flow Control Functions</a></li><li><a href="/knit/docs/sprig/integer_slice.html" class="sidebar-link">Integer Slice Functions</a></li><li><a href="/knit/docs/sprig/lists.html" class="sidebar-link">Lists and List Functions</a></li><li><a href="/knit/docs/sprig/math.html" class="sidebar-link">Integer Math Functions</a></li><li><a href="/knit/docs/sprig/mathf.html" class="sidebar-link">Float Math Functions</a></li><li><a href="/knit/docs/sprig/network.html" class="sidebar-link">Network Functions</a></li><li><a href="/knit/docs/sprig/os.html" class="sidebar-link">OS Functions</a></li><li><a href="/knit/docs/sprig/paths.html" class="sidebar-link">Path and Filepath Functions</a></li><li><a href="/knit/docs/sprig/reflection.html" class="sidebar-link">Reflection Functions</a></li><li><a href="/knit/docs/sprig/semver.html" class="sidebar-link">Semantic Version Functions</a></li><li><a href="/knit/docs/sprig/string_slice.html" class="sidebar-link">String Slice Functions</a></li><li><a href="/knit/docs/sprig/strings.html" class="sidebar-link">String Functions</a></li><li><a href="/knit/docs/sprig/url.html" class="sidebar-link">URL Functions</a></li><li><a href="/knit/docs/sprig/uuid.html" class="sidebar-link">UUID Functions</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="default-functions"><a href="#default-functions" class="header-anchor">#</a> Default Functions</h1> <p>Sprig provides tools for setting default values for templates.</p> <h2 id="default"><a href="#default" class="header-anchor">#</a> default</h2> <p>To set a simple default value, use <code>default</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>default &quot;foo&quot; .Bar
</code></pre></div><p>In the above, if <code>.Bar</code> evaluates to a non-empty value, it will be used. But if
it is empty, <code>foo</code> will be returned instead.</p> <p>The definition of &quot;empty&quot; depends on type:</p> <ul><li>Numeric: 0</li> <li>String: &quot;&quot;</li> <li>Lists: <code>[]</code></li> <li>Dicts: <code>{}</code></li> <li>Boolean: <code>false</code></li> <li>And always <code>nil</code> (aka null)</li></ul> <p>For structs, there is no definition of empty, so a struct will never return the
default.</p> <h2 id="empty"><a href="#empty" class="header-anchor">#</a> empty</h2> <p>The <code>empty</code> function returns <code>true</code> if the given value is considered empty, and
<code>false</code> otherwise. The empty values are listed in the <code>default</code> section.</p> <div class="language- extra-class"><pre class="language-text"><code>empty .Foo
</code></pre></div><p>Note that in Go template conditionals, emptiness is calculated for you. Thus,
you rarely need <code>if empty .Foo</code>. Instead, just use <code>if .Foo</code>.</p> <h2 id="coalesce"><a href="#coalesce" class="header-anchor">#</a> coalesce</h2> <p>The <code>coalesce</code> function takes a list of values and returns the first non-empty
one.</p> <div class="language- extra-class"><pre class="language-text"><code>coalesce 0 1 2
</code></pre></div><p>The above returns <code>1</code>.</p> <p>This function is useful for scanning through multiple variables or values:</p> <div class="language- extra-class"><pre class="language-text"><code>coalesce .name .parent.name &quot;Matt&quot;
</code></pre></div><p>The above will first check to see if <code>.name</code> is empty. If it is not, it will return
that value. If it <em>is</em> empty, <code>coalesce</code> will evaluate <code>.parent.name</code> for emptiness.
Finally, if both <code>.name</code> and <code>.parent.name</code> are empty, it will return <code>Matt</code>.</p> <h2 id="all"><a href="#all" class="header-anchor">#</a> all</h2> <p>The <code>all</code> function takes a list of values and returns true if all values are non-empty.</p> <div class="language- extra-class"><pre class="language-text"><code>all 0 1 2
</code></pre></div><p>The above returns <code>false</code>.</p> <p>This function is useful for evaluating multiple conditions of variables or values:</p> <div class="language- extra-class"><pre class="language-text"><code>all (eq .Request.TLS.Version 0x0304) (.Request.ProtoAtLeast 2 0) (eq .Request.Method &quot;POST&quot;)
</code></pre></div><p>The above will check http.Request is POST with tls 1.3 and http/2.</p> <h2 id="any"><a href="#any" class="header-anchor">#</a> any</h2> <p>The <code>any</code> function takes a list of values and returns true if any value is non-empty.</p> <div class="language- extra-class"><pre class="language-text"><code>any 0 1 2
</code></pre></div><p>The above returns <code>true</code>.</p> <p>This function is useful for evaluating multiple conditions of variables or values:</p> <div class="language- extra-class"><pre class="language-text"><code>any (eq .Request.Method &quot;GET&quot;) (eq .Request.Method &quot;POST&quot;) (eq .Request.Method &quot;OPTIONS&quot;)
</code></pre></div><p>The above will check http.Request method is one of GET/POST/OPTIONS.</p> <h2 id="fromjson-mustfromjson"><a href="#fromjson-mustfromjson" class="header-anchor">#</a> fromJson, mustFromJson</h2> <p><code>fromJson</code> decodes a JSON document into a structure. If the input cannot be decoded as JSON the function will return an empty string.
<code>mustFromJson</code> will return an error in case the JSON is invalid.</p> <div class="language- extra-class"><pre class="language-text"><code>fromJson &quot;{\&quot;foo\&quot;: 55}&quot;
</code></pre></div><h2 id="tojson-musttojson"><a href="#tojson-musttojson" class="header-anchor">#</a> toJson, mustToJson</h2> <p>The <code>toJson</code> function encodes an item into a JSON string. If the item cannot be converted to JSON the function will return an empty string.
<code>mustToJson</code> will return an error in case the item cannot be encoded in JSON.</p> <div class="language- extra-class"><pre class="language-text"><code>toJson .Item
</code></pre></div><p>The above returns JSON string representation of <code>.Item</code>.</p> <h2 id="toprettyjson-musttoprettyjson"><a href="#toprettyjson-musttoprettyjson" class="header-anchor">#</a> toPrettyJson, mustToPrettyJson</h2> <p>The <code>toPrettyJson</code> function encodes an item into a pretty (indented) JSON string.</p> <div class="language- extra-class"><pre class="language-text"><code>toPrettyJson .Item
</code></pre></div><p>The above returns indented JSON string representation of <code>.Item</code>.</p> <h2 id="torawjson-musttorawjson"><a href="#torawjson-musttorawjson" class="header-anchor">#</a> toRawJson, mustToRawJson</h2> <p>The <code>toRawJson</code> function encodes an item into JSON string with HTML characters unescaped.</p> <div class="language- extra-class"><pre class="language-text"><code>toRawJson .Item
</code></pre></div><p>The above returns unescaped JSON string representation of <code>.Item</code>.</p> <h2 id="ternary"><a href="#ternary" class="header-anchor">#</a> ternary</h2> <p>The <code>ternary</code> function takes two values, and a test value. If the test value is
true, the first value will be returned. If the test value is empty, the second
value will be returned. This is similar to the c ternary operator.</p> <h3 id="true-test-value"><a href="#true-test-value" class="header-anchor">#</a> true test value</h3> <div class="language- extra-class"><pre class="language-text"><code>ternary &quot;foo&quot; &quot;bar&quot; true
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>true | ternary &quot;foo&quot; &quot;bar&quot;
</code></pre></div><p>The above returns <code>&quot;foo&quot;</code>.</p> <h3 id="false-test-value"><a href="#false-test-value" class="header-anchor">#</a> false test value</h3> <div class="language- extra-class"><pre class="language-text"><code>ternary &quot;foo&quot; &quot;bar&quot; false
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>false | ternary &quot;foo&quot; &quot;bar&quot;
</code></pre></div><p>The above returns <code>&quot;bar&quot;</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knit/docs/sprig/date.html" class="prev">
        Date Functions
      </a></span> <span class="next"><a href="/knit/docs/sprig/dicts.html">
        Dictionaries and Dict Functions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knit/assets/js/app.7846f8ce.js" defer></script><script src="/knit/assets/js/2.9f7d206a.js" defer></script><script src="/knit/assets/js/19.6ee22869.js" defer></script>
  </body>
</html>
